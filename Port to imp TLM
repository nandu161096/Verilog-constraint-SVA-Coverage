// Code your testbench here
// or browse Examples
`include "uvm_macros.svh"
import uvm_pkg::*;

class producer extends uvm_component;
  `uvm_component_utils(producer)
   uvm_put_port#(int) prod_put;
  
  function new(string name = "producer", uvm_component parent = null);
    super.new(name, parent);
    prod_put = new("prod_put",this);
  endfunction
             
  task run_phase(uvm_phase phase);
  int value = 10;
    super.run_phase(phase);
    `uvm_info(get_type_name(), $sformatf("Send value = %0h", value), UVM_NONE);
    prod_put.put(value);
  endtask
endclass

class consumer extends uvm_component;
  `uvm_component_utils(consumer)
  uvm_put_imp#(int, consumer) cons_put;
  
  function new(string name = "consumer", uvm_component parent = null);
    super.new(name, parent);
    cons_put = new("cons_put", this);
  endfunction
  virtual task put(int val);
    #10;
    `uvm_info(get_type_name(), $sformatf("Received value = %0h", val), UVM_NONE);
  endtask
endclass

class env extends uvm_env;
  `uvm_component_utils(env)
  producer p;
  consumer c;
  
    function new(string name = "env", uvm_component parent = null);
    super.new(name, parent);
  endfunction
  function void build_phase(uvm_phase phase);
    super.build_phase(phase);
p = producer::type_id::create("p", this);
c = consumer::type_id::create("c", this);
  endfunction
  
  function void connect_phase(uvm_phase phase);
     super.connect_phase(phase);
    p.prod_put.connect(c.cons_put);
  endfunction
endclass

class test extends uvm_test;
    `uvm_component_utils(test)
  env e;
  
      function new(string name = "test", uvm_component parent = null);
    super.new(name, parent);
  endfunction
  
   function void build_phase(uvm_phase phase);
    super.build_phase(phase);
     e = env::type_id::create("e", this);
  endfunction
  

  task run_phase(uvm_phase phase);
    phase.raise_objection(this);
    #400;
    phase.drop_objection(this);
  endtask
endclass

module tb;
  initial begin
    run_test("test");
  end
  
endmodule
